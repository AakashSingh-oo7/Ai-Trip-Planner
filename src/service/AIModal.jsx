import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: {location}, for {totalDays} Days for {traveler} with a {budget} budget,Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating ,Time travel each of the location for {totalDays} days with each day plan with best time to visit in JSON format strictly only JSON",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "travelPlan": {\n    "location": "Las Vegas",\n    "duration": "3 Days",\n    "budget": "Cheap (Couple)",\n    "hotels": [\n      {\n        "hotelName": "Circus Circus Hotel & Casino",\n        "hotelAddress": "2880 S Las Vegas Blvd, Las Vegas, NV 89109",\n        "price": "$40-$80 per night",\n        "hotelImageUrl": "https://www.circuscircus.com/wp-content/uploads/2023/05/circus-circus-hotel-room-banner.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1299,\n          "longitude": -115.1741\n        },\n        "rating": 3.5,\n        "description": "Value-oriented hotel with a circus theme, offering affordable rooms and family-friendly entertainment."\n      },\n      {\n        "hotelName": "Excalibur Hotel & Casino",\n        "hotelAddress": "3850 S Las Vegas Blvd, Las Vegas, NV 89109",\n        "price": "$50-$90 per night",\n        "hotelImageUrl": "https://www.excalibur.com/content/dam/eclv/Page-Backgrounds/Hero-Images/eclv-pool-banner-2560x864.adapt.2560.1000.jpg",\n        "geoCoordinates": {\n          "latitude": 36.0987,\n          "longitude": -115.1744\n        },\n        "rating": 4.0,\n        "description": "Castle-themed hotel with a range of dining and entertainment options at reasonable prices."\n      },\n      {\n        "hotelName": "Luxor Hotel & Casino",\n        "hotelAddress": "3900 S Las Vegas Blvd, Las Vegas, NV 89119",\n        "price": "$60-$100 per night",\n        "hotelImageUrl": "https://www.mgmresorts.com/content/dam/MGM/luxor/hotel/property-exterior/luxor-hotel-exterior-at-night-1400x576.adapt.1900.1000.jpg",\n        "geoCoordinates": {\n          "latitude": 36.0956,\n          "longitude": -115.1759\n        },\n        "rating": 4.0,\n        "description": "Pyramid-shaped hotel offering unique accommodations and attractions, generally affordable but prices vary."\n      }\n    ],\n    "itinerary": {\n      "day1": {\n        "theme": "Exploring the Strip (South End)",\n        "plan": [\n          {\n            "placeName": "Welcome to Las Vegas Sign",\n            "placeDetails": "Iconic sign perfect for a photo opportunity. Get there early to avoid crowds.",\n            "placeImageUrl": "https://www.lasvegasnevada.gov/Portals/0/EasyDNNnews/134/img-new-welcome-to-las-vegas-sign.jpg",\n            "geoCoordinates": {\n              "latitude": 36.0828,\n              "longitude": -115.1727\n            },\n            "ticketPricing": "Free",\n            "rating": 4.5,\n            "bestTimeToVisit": "Early morning (before 9 AM)",\n            "travelTimeFromHotel": "10-15 minutes (depending on hotel location; consider bus or ride-sharing)"\n          },\n          {\n            "placeName": "Bellagio Conservatory & Botanical Garden",\n            "placeDetails": "Stunning floral displays that change seasonally. A beautiful and free attraction inside the Bellagio.",\n            "placeImageUrl": "https://www.bellagio.com/content/dam/MGM/bellagio/entertainment/conservatory/bellagio-conservatory-chinese-new-year-2024-1600x600.adapt.1900.1000.jpg",\n            "geoCoordinates": {\n              "latitude": 36.1127,\n              "longitude": -115.1744\n            },\n            "ticketPricing": "Free",\n            "rating": 4.8,\n            "bestTimeToVisit": "Mid-morning (10 AM - 12 PM) or late afternoon",\n            "travelTimeFromPreviousLocation": "15-20 minutes (walking and utilizing free trams between hotels)"\n          },\n          {\n            "placeName": "Fountains of Bellagio",\n            "placeDetails": "Spectacular water show synchronized to music. Free to watch and runs frequently.",\n            "placeImageUrl": "https://www.bellagio.com/content/dam/MGM/bellagio/entertainment/fountains-of-bellagio/fountains-of-bellagio-evening-1600x600.adapt.1900.1000.jpg",\n            "geoCoordinates": {\n              "latitude": 36.1127,\n              "longitude": -115.1744\n            },\n            "ticketPricing": "Free",\n            "rating": 4.7,\n            "bestTimeToVisit": "Anytime, but evening shows are especially impressive.",\n            "travelTimeFromPreviousLocation": "Right outside the Conservatory"\n          },\n          {\n            "placeName": "High Roller Observation Wheel",\n            "placeDetails": "Giant Ferris wheel offering panoramic views of Las Vegas. Consider happy hour in the cabins for a cheaper experience.",\n            "placeImageUrl": "https://www.caesars.com/content/dam/clv/entertainment/high-roller/high-roller-ferris-wheel-v2-1440x720.jpg",\n            "geoCoordinates": {\n              "latitude": 36.1168,\n              "longitude": -115.1680\n            },\n            "ticketPricing": "$25-$40 (varies by time of day and discounts available online)",\n            "rating": 4.3,\n            "bestTimeToVisit": "Sunset for optimal views. Check for happy hour deals.",\n            "travelTimeFromPreviousLocation": "15-20 minutes (walking and utilizing free trams between hotels), Bus available."\n          }\n        ]\n      },\n      "day2": {\n        "theme": "Downtown Las Vegas & Fremont Street Experience",\n        "plan": [\n          {\n            "placeName": "Fremont Street Experience",\n            "placeDetails": "Light and sound show under a massive LED canopy. Free to enter and watch the shows.",\n            "placeImageUrl": "https://vegasexperience.com/wp-content/uploads/2019/03/fremont-street-experience-homepage-og-image.jpg",\n            "geoCoordinates": {\n              "latitude": 36.1701,\n              "longitude": -115.1422\n            },\n            "ticketPricing": "Free",\n            "rating": 4.6,\n            "bestTimeToVisit": "Evening (after dark) for the light shows.",\n            "travelTimeFromHotel": "30-45 minutes (consider bus or ride-sharing)"\n          },\n          {\n            "placeName": "Container Park",\n            "placeDetails": "Unique shopping and dining area built from repurposed shipping containers. Live entertainment and a playground.",\n            "placeImageUrl": "https://downtowncontainerpark.com/wp-content/uploads/2023/04/DCP_Overview_Banner.jpg",\n            "geoCoordinates": {\n              "latitude": 36.1688,\n              "longitude": -115.1402\n            },\n            "ticketPricing": "Free to enter. Prices for food and shopping vary.",\n            "rating": 4.2,\n            "bestTimeToVisit": "Late afternoon/early evening.",\n            "travelTimeFromPreviousLocation": "5-10 minutes (walking)"\n          },\n          {\n            "placeName": "Neon Museum Boneyard (Optional)",\n            "placeDetails": "Outdoor display of vintage Las Vegas signs. Requires tickets (consider the evening guided tour).",\n            "placeImageUrl": "https://www.neonmuseum.org/wp-content/uploads/2022/08/Neon-Museum-Boneyard-Evening_1800x800.jpg",\n            "geoCoordinates": {\n              "latitude": 36.1531,\n              "longitude": -115.1417\n            },\n            "ticketPricing": "$30 - $40 (depending on tour type)",\n            "rating": 4.5,\n            "bestTimeToVisit": "Evening guided tour for best experience.",\n            "travelTimeFromPreviousLocation": "10-15 minutes (ride-sharing). Book in advance.",\n            "alternative": "If budget is very tight, skip the ticketed tour and explore the general area of Downtown with its murals and architecture.  Free."\n          }\n        ]\n      },\n      "day3": {\n        "theme": "Off-Strip Activities & Relaxation",\n        "plan": [\n          {\n            "placeName": "Red Rock Canyon National Conservation Area",\n            "placeDetails": "Scenic desert landscape perfect for hiking and photography. Drive the scenic loop or take a hike.",\n            "placeImageUrl": "https://www.redrockcanyonlv.org/wp-content/uploads/2022/04/Red-Rock-Canyon-Scenic-Drive.jpg",\n            "geoCoordinates": {\n              "latitude": 36.1458,\n              "longitude": -115.4159\n            },\n            "ticketPricing": "$15 per vehicle (day use fee)",\n            "rating": 4.7,\n            "bestTimeToVisit": "Early morning or late afternoon to avoid the heat. Bring water!",\n            "travelTimeFromHotel": "30-45 minutes (rental car or ride-sharing)"\n          },\n           {\n            "placeName": "Ethel M Chocolate Factory and Cactus Garden",\n            "placeDetails": "Free tour of a chocolate factory and a beautiful cactus garden. A sweet and unique experience.",\n            "placeImageUrl": "https://www.ethelm.com/wp-content/uploads/2023/04/CactusGarden-Homepage-Slider_1920x1080.jpg",\n            "geoCoordinates": {\n              "latitude": 36.0268,\n              "longitude": -115.0713\n            },\n            "ticketPricing": "Free (chocolate tasting may have a small charge)",\n            "rating": 4.4,\n            "bestTimeToVisit": "Anytime during opening hours.",\n            "travelTimeFromPreviousLocation": "45-60 minutes (rental car or ride-sharing)"\n          },\n          {\n            "placeName": "Pool Time / Relaxation",\n            "placeDetails": "Enjoy the hotel pool or find a free or cheap activity. Many hotel pools are free to guests.",\n            "placeImageUrl": "https://www.caesars.com/content/dam/universal/destinations/pools/caesars-palace-garden-of-the-gods-pool-jupiter-minerva-2000x600.jpg",\n            "geoCoordinates": {\n              "latitude": 36.1146,\n              "longitude": -115.1728\n            },\n            "ticketPricing": "Free (if using the hotel pool)",\n            "rating": 4.0,\n            "bestTimeToVisit": "Afternoon.",\n            "travelTimeFromPreviousLocation": "Consider time for travel back to your hotel from previous activity."\n          }\n        ]\n      }\n    }\n  }\n}\n```',
        },
      ],
    },
  ],
});
